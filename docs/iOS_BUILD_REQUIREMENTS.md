# iOS Build Requirements and Process

## Platform Limitations

### Why iOS Builds Cannot Work on Linux

iOS builds are technically impossible on Linux due to fundamental platform restrictions:

1. **Apple's Xcode Requirement**: iOS builds require Xcode, which is exclusively available on macOS
2. **iOS SDK Dependency**: The iOS SDK and development tools are only provided through Xcode
3. **Code Signing Infrastructure**: Apple's code signing system requires macOS-specific tools and frameworks
4. **Simulator Requirements**: iOS Simulator only runs on macOS with specific hardware requirements
5. **Legal Restrictions**: Apple's Software License Agreement prohibits running macOS/Xcode on non-Apple hardware

**FACT**: There are no legitimate workarounds, emulation solutions, or cross-compilation tools that can produce production-ready iOS builds on Linux.

## Required Hardware and Software

### macOS System Requirements

**Minimum macOS Version**: macOS 12.0 (Monterey) or later
- **Recommended**: macOS 13.0 (Ventura) or macOS 14.0 (Sonoma)
- **Hardware**: Intel Mac (2017 or later) or Apple Silicon Mac (M1/M2/M3)
- **RAM**: Minimum 8GB, recommended 16GB+
- **Storage**: Minimum 100GB free space for Xcode and dependencies

### Xcode Requirements

**Current Xcode Version**: 15.0 or later
- **Download Size**: ~10-15GB
- **Installation Space**: ~30-50GB after installation
- **iOS SDK**: Automatically included with Xcode
- **Command Line Tools**: Automatically installed with Xcode

**Installation Command**:
```bash
# Install Xcode from Mac App Store (preferred method)
# OR download from Apple Developer Portal

# Install command line tools if needed
xcode-select --install
```

### Flutter iOS Dependencies

**Required Flutter Configuration**:
```bash
# Verify Flutter iOS setup
flutter doctor

# Expected output should show:
# ✓ Flutter (Channel stable, version 3.16.0+)
# ✓ Xcode - develop for iOS and macOS
# ✓ iOS Simulator
```

## Apple Developer Account Requirements

### Account Types and Limitations

**Free Apple ID Account**:
- **Cost**: Free
- **Limitations**: 
  - Apps expire after 7 days
  - Cannot distribute to App Store
  - Limited to 3 devices per year
  - No push notifications
  - No CloudKit
- **Use Case**: Development and testing only

**Apple Developer Program**:
- **Cost**: $99/year (individual) or $299/year (enterprise)
- **Benefits**:
  - App Store distribution
  - TestFlight beta testing
  - Push notifications
  - CloudKit access
  - Advanced app capabilities
  - 100 device registrations per year

### Account Setup Process

1. **Create Apple ID**: If you don't have one at https://appleid.apple.com
2. **Enroll in Developer Program**: Visit https://developer.apple.com/programs/
3. **Verify Identity**: Apple requires government-issued photo ID
4. **Payment**: Credit card or bank account for annual fee
5. **Approval Time**: 24-48 hours for individual accounts

## Code Signing and Provisioning

### Certificates

**Development Certificate**:
- **Purpose**: Sign apps for development and testing
- **Validity**: 1 year
- **Creation**: Automatically generated by Xcode or manually in Developer Portal

**Distribution Certificate**:
- **Purpose**: Sign apps for App Store or Ad Hoc distribution
- **Validity**: 1 year
- **Requirement**: Apple Developer Program membership

### Provisioning Profiles

**Development Provisioning Profile**:
- **Contains**: App ID, Development Certificate, Device UDIDs
- **Purpose**: Install apps on registered devices for testing
- **Management**: Automatically managed by Xcode (recommended)

**App Store Provisioning Profile**:
- **Contains**: App ID, Distribution Certificate
- **Purpose**: App Store submission
- **Management**: Automatically generated during App Store upload

### Bundle Identifier Configuration

**Current App Configuration** (from Info.plist):
- **Display Name**: EduLift
- **Bundle Name**: edulift
- **Bundle Identifier**: Must be configured in Xcode project settings

**Required Setup**:
1. Open `ios/Runner.xcworkspace` in Xcode
2. Select Runner project → Signing & Capabilities
3. Set Team to your Apple Developer Account
4. Configure Bundle Identifier (e.g., `com.yourcompany.edulift`)
5. Enable Automatic Signing (recommended)

## Step-by-Step iOS Build Instructions for macOS

### Prerequisites Verification

```bash
# 1. Verify Flutter installation
flutter --version
# Expected: Flutter 3.16.0+ with Dart 3.2.0+

# 2. Verify Xcode installation
xcode-select -p
# Expected: /Applications/Xcode.app/Contents/Developer

# 3. Check iOS development setup
flutter doctor
# All iOS-related items should show checkmarks
```

### Project Configuration

```bash
# 1. Navigate to project directory
cd /workspace/mobile_app

# 2. Install Flutter dependencies
flutter pub get

# 3. Generate required files
flutter packages pub run build_runner build
```

### Xcode Project Setup

```bash
# 1. Open iOS project in Xcode
open ios/Runner.xcworkspace
```

**In Xcode**:
1. **Select Runner project** in navigator
2. **Go to Signing & Capabilities tab**
3. **Set Development Team** to your Apple Developer Account
4. **Configure Bundle Identifier**:
   - Current placeholder: `$(PRODUCT_BUNDLE_IDENTIFIER)`
   - Set to unique identifier: `com.yourcompany.edulift`
5. **Enable Automatic Signing** (recommended)
6. **Select Target Device** or Simulator

### Build Commands

**Debug Build for Simulator**:
```bash
# Build for iOS Simulator
flutter build ios --simulator --debug

# Run on simulator
flutter run -d ios
```

**Debug Build for Physical Device**:
```bash
# Build for physical device (requires Developer Account)
flutter build ios --debug

# Run on connected device
flutter run -d [device-id]
```

**Release Build for Distribution**:
```bash
# Build release version
flutter build ios --release

# Create archive for App Store
flutter build ipa
```

### Distribution Process

**TestFlight Distribution**:
1. **Build IPA**: `flutter build ipa --release`
2. **Open Xcode Archive**: Product → Archive
3. **Upload to App Store Connect**: Distribute App → App Store Connect
4. **Add to TestFlight**: In App Store Connect, add build to TestFlight

**App Store Submission**:
1. **Prepare App Store Listing**: Screenshots, description, metadata
2. **Submit for Review**: In App Store Connect
3. **Review Process**: Apple typically reviews within 24-48 hours
4. **Release**: Manual or automatic release after approval

## Current Project iOS Configuration

### Dependencies Analysis

Based on `pubspec.yaml`, the following iOS-specific considerations apply:

**Platform-Specific Packages**:
- `local_auth_android: ^1.0.38` - Android-specific, iOS equivalent built into `local_auth`
- `firebase_core: ^3.10.0` - Requires iOS configuration
- `firebase_crashlytics: ^4.1.0` - Requires iOS setup
- `flutter_secure_storage: ^10.0.0-beta.4` - iOS Keychain integration
- `app_links: ^6.0.0` - Deep linking (configured in Info.plist)

**iOS Configuration Required**:
1. **Firebase Setup**: Add `GoogleService-Info.plist` to iOS project
2. **Permissions**: Add required permissions to Info.plist for:
   - Local authentication (Face ID/Touch ID)
   - Network access
   - Deep linking (already configured)

### Known Limitations

**Current Issues**:
1. **Bundle Identifier**: Not yet configured in Xcode project
2. **Team/Signing**: Requires Apple Developer Account setup
3. **Firebase Configuration**: Missing iOS configuration files
4. **App Icons**: Need iOS-specific app icons in multiple sizes

## Troubleshooting Common Issues

### Build Failures

**"No Development Team Selected"**:
- **Solution**: Configure Team in Xcode Signing & Capabilities
- **Requirement**: Apple Developer Account

**"Provisioning Profile Issues"**:
- **Solution**: Enable Automatic Signing in Xcode
- **Alternative**: Manually manage profiles in Developer Portal

**"Code Signing Identity Not Found"**:
- **Solution**: Ensure valid Development Certificate exists
- **Action**: Revoke and recreate certificate if expired

### Runtime Issues

**App Crashes on Launch**:
- **Check**: Code signing and provisioning profile validity
- **Verify**: All required frameworks are linked
- **Debug**: Use Xcode console for crash logs

**Missing Permissions**:
- **Solution**: Add required permission entries to Info.plist
- **Example**: `NSFaceIDUsageDescription` for Face ID access

## Security and Compliance

### App Transport Security

iOS requires HTTPS by default. For development with HTTP:

```xml
<!-- Add to Info.plist for development only -->
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
</dict>
```

**IMPORTANT**: Remove for production builds.

### Privacy Permissions

Required additions to Info.plist for app functionality:

```xml
<!-- For local authentication -->
<key>NSFaceIDUsageDescription</key>
<string>This app uses Face ID for secure authentication</string>

<!-- For network access (if needed) -->
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSExceptionDomains</key>
    <dict>
        <key>your-api-domain.com</key>
        <dict>
            <key>NSExceptionAllowsInsecureHTTPLoads</key>
            <true/>
        </dict>
    </dict>
</dict>
```

## Summary

iOS development and distribution requires:

1. **macOS Computer**: No alternatives exist
2. **Xcode**: Latest version from Mac App Store
3. **Apple Developer Account**: $99/year for distribution
4. **Code Signing Setup**: Certificates and provisioning profiles
5. **Project Configuration**: Bundle ID, signing, and capabilities

There are no workarounds for the macOS requirement. Any solution claiming to build iOS apps on Linux is either:
- Using cloud-based macOS services (still requires macOS)
- Producing non-functional or non-distributable apps
- Violating Apple's licensing terms

For legitimate iOS development, a Mac computer and Apple Developer Account are mandatory requirements.